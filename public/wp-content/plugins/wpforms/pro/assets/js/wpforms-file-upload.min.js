!function o(t,a,s){function d(n,e){if(!a[n]){if(!t[n]){var r="function"==typeof require&&require;if(!e&&r)return r(n,!0);if(l)return l(n,!0);throw new Error("Cannot find module '"+n+"'")}var i=a[n]={exports:{}};t[n][0].call(i.exports,function(e){var r=t[n][1][e];return d(r||e)},i,i.exports,o,t,a,s)}return a[n].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)d(s[e]);return d}({1:[function(e,r,n){"use strict";function i(r){if(null===h){var e=function(){for(var e="",r=0;r<x.payloadSize;++r)e+=String.fromCharCode(Math.round(36*Math.random()+64));return e}(),n=new Date;wp.ajax.post({action:"wpforms_file_upload_speed_test",data:e}).then(function(){var e=new Date-n;h=e>=x.maxTime,r()}).fail(function(){h=!0,r()})}else setTimeout(r)}function a(e){e.loading<0&&(e.loading=0);var r,n=jQuery(e.element).closest("form"),i=n.find(".wpforms-submit"),o=e.getFilesWithStatus("error"),t=(r=n,function(){r.find(".wpforms-uploading-in-progress-alert").length||r.find(".wpforms-submit-container").before('<div class="wpforms-error-alert wpforms-uploading-in-progress-alert">'+window.wpforms_file_upload.loading_message+"</div>")});0<e.loading||0<o.length?(i.prop("disabled",!0),n.find(".wpforms-submit-overlay").length||(i.parent().addClass("wpforms-submit-overlay-container"),i.parent().append('<div class="wpforms-submit-overlay"></div>'),n.find(".wpforms-submit-overlay").css("width",i.outerWidth()+"px"),n.find(".wpforms-submit-overlay").css("height",i.parent().outerHeight()+"px"),n.find(".wpforms-submit-overlay").on("click",t))):(i.prop("disabled",!1),n.find(".wpforms-submit-overlay").off("click",t),n.find(".wpforms-submit-overlay").remove(),i.parent().removeClass("wpforms-submit-overlay-container"),n.find(".wpforms-uploading-in-progress-alert").length&&n.find(".wpforms-uploading-in-progress-alert").remove())}function s(e){try{return JSON.parse(e)}catch(e){return!1}}function o(e){return 0<e.length}function t(e){return e}function d(e){return e.chunkResponse||e.xhr}function l(e){return"string"==typeof e?e:e.responseText}function f(e){return e.data}function p(e){var r,n,i=jQuery(e.element).parents(".wpforms-field-file-upload").find("input[name="+e.dataTransfer.name+"]");i.val((n=e.files,(r=n.map(d).filter(t).map(l).filter(o).map(s).filter(t).map(f)).length?JSON.stringify(r):"")).trigger("input"),void 0!==jQuery.fn.valid&&i.valid()}function u(e,r){if(!e.isErrorNotUploadedDisplayed){var n=document.createElement("span");n.innerText=r.toString(),n.setAttribute("data-dz-errormessage",""),e.previewElement.querySelector(".dz-error-message").appendChild(n)}}function m(i){return function r(n){n.retries||(n.retries=0),"error"!==n.status&&(wp.ajax.post(jQuery.extend({action:"wpforms_file_chunks_uploaded",form_id:i.dataTransfer.formId,field_id:i.dataTransfer.fieldId,name:n.name},i.options.params.call(i,null,null,{file:n,index:0}))).then(function(e){n.chunkResponse=JSON.stringify({data:e}),i.loading=i.loading||0,i.loading--,a(i),p(i)}).fail(function(e){e.responseJSON&&!1===e.responseJSON.success&&e.responseJSON.data?u(n,e.responseJSON.data):(n.retries++,3!==n.retries?setTimeout(function(){r(n)},5e3*n.retries):u(n,window.wpforms_file_upload.errors.file_not_uploaded))}),i.processQueue())}}function c(e){setTimeout(function(){e.files.filter(function(e){return e.accepted}).length>=e.options.maxFiles?e.element.querySelector(".dz-message").classList.add("hide"):e.element.querySelector(".dz-message").classList.remove("hide")},0)}function w(o){return function(e){var r,n;e.size>=o.dataTransfer.postMaxSize?(r=e,n=o,setTimeout(function(){if(r.size>=n.dataTransfer.postMaxSize){var e=window.wpforms_file_upload.errors.post_max_size;r.isErrorNotUploadedDisplayed||(r.isErrorNotUploadedDisplayed=!0,e=window.wpforms_file_upload.errors.file_not_uploaded+" "+e,u(r,e))}},1)):i(function(){var n,i;n=o,i=e,wp.ajax.post(jQuery.extend({action:"wpforms_upload_chunk_init",form_id:n.dataTransfer.formId,field_id:n.dataTransfer.fieldId,name:i.name,slow:h},n.options.params.call(n,null,null,{file:i,index:0}))).then(function(e){for(var r in e)n.options[r]=e[r];e.dzchunksize&&(n.options.chunkSize=parseInt(e.dzchunksize,10),i.upload.totalChunkCount=Math.ceil(i.size/n.options.chunkSize)),n.processQueue()}).fail(function(e){i.status="error",u(i,e),n.processQueue()})}),o.loading=o.loading||0,o.loading++,a(o),c(o)}}function _(t){return function(e){c(t);var r,n,i=e.chunkResponse||(e.xhr||{}).responseText;if(i){var o=s(i);o&&o.data&&o.data.file&&(r=o.data.file,n=t,wp.ajax.post({action:"wpforms_remove_file",file:r,form_id:n.dataTransfer.formId,field_id:n.dataTransfer.fieldId}))}p(t),t.loading=t.loading||0,t.loading--,a(t)}}function g(e){var i,r=parseInt(e.dataset.formId,10),n=parseInt(e.dataset.fieldId,10)||0,o=parseInt(e.dataset.maxFileNumber,10),t=e.dataset.extensions.split(",").map(function(e){return"."+e}).join(","),a=new window.Dropzone(e,{url:window.wpforms_file_upload.url,addRemoveLinks:!0,chunking:!0,forceChunking:!0,retryChunks:!0,chunkSize:parseInt(e.dataset.fileChunkSize,10),paramName:e.dataset.inputName,parallelChunkUploads:!!(e.dataset.parallelUploads||"").match(/^true$/i),parallelUploads:parseInt(e.dataset.maxParallelUploads,10),autoProcessQueue:!1,maxFilesize:(parseInt(e.dataset.maxSize,10)/1048576).toFixed(2),maxFiles:o,acceptedFiles:t,dictMaxFilesExceeded:window.wpforms_file_upload.errors.file_limit.replace("{fileLimit}",o),dictInvalidFileType:window.wpforms_file_upload.errors.file_extension,dictFileTooBig:window.wpforms_file_upload.errors.file_size});return a.dataTransfer={postMaxSize:e.dataset.maxSize,name:e.dataset.inputName,formId:r,fieldId:n},a.on("sending",(i={action:"wpforms_upload_chunk",form_id:r,field_id:n},function(e,r,n){if(e.size>this.dataTransfer.postMaxSize)return r.send=function(){},e.accepted=!1,e.processing=!1,e.status="rejected",e.previewElement.classList.add("dz-error"),void e.previewElement.classList.add("dz-complete");Object.keys(i).forEach(function(e){n.append(e,i[e])})})),a.on("addedfile",w(a)),a.on("removedfile",_(a)),a.on("complete",m(a)),a.on("error",function(e,r){e.isErrorNotUploadedDisplayed||(e.isErrorNotUploadedDisplayed=!0,e.previewElement.querySelectorAll("[data-dz-errormessage]")[0].textContent=window.wpforms_file_upload.errors.file_not_uploaded+" "+r)}),a}function v(){window.wpforms=window.wpforms||{},window.wpforms.dropzones=[].slice.call(document.querySelectorAll(".wpforms-uploader")).map(g)}var h,x,y;h=null,x={maxTime:3e3,payloadSize:102400},(y={init:function(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",v):v()}}).init(),window.wpformsModernFileUpload=y},{}]},{},[1]);